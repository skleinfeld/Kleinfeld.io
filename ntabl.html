---
permalink: /ntabl/
---

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>North Texas Amateur Baseball League | Interactive Hitting Stats</title>
<link rel="icon" href="favicon.ico">
<style>
  :root{
    --bg:#0b0c0f;--panel:#13151a;--muted:#8b8fa3;--text:#e9e9ee;
    --ink:#d7d7df;--border:rgba(255,255,255,.10);--glow:#6a4bd8;
    --chip:#1c1f27;--chip-bd:rgba(255,255,255,.12);--chip-t:#dcdcf5;
    --head:#0f1117;--head-bd:rgba(255,255,255,.12);
    --row:#0f1117;--row-alt:#0e1014;--row-hl:rgba(106,75,216,.12);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:radial-gradient(1200px 500px at 10% 75%, rgba(106,75,216,.08) 0%, transparent 60%), var(--bg);
    color:var(--text); font: 500 14px/1.45 ui-sans-serif, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap{max-width:1180px;margin:42px auto;padding:0 20px}
  h1{margin:0 0 18px;font-weight:700;font-size:20px;letter-spacing:.2px}
  .filters{
    display:grid; grid-template-columns: repeat(5, 1fr) 140px; gap:12px;
    background:linear-gradient(180deg, rgba(106,75,216,.12), rgba(106,75,216,0)) border-box;
    border:1px solid var(--border); border-radius:14px; padding:12px;
  }
  .chip{
    display:flex; align-items:center; gap:8px; background:var(--chip);
    border:1px solid var(--chip-bd); border-radius:10px; padding:8px 10px;
  }
  .chip label{font-size:12px;color:var(--muted)}
  .chip select, .chip button{
    width:100%; background:transparent; color:var(--text); border:0; outline:0;
    padding:4px 2px; font:inherit; appearance:none;
  }
  .chip button{
    background:rgba(106,75,216,.12); border:1px solid var(--chip-bd);
    border-radius:8px; cursor:pointer; transition:.15s ease;
  }
  .chip button:hover{box-shadow:0 0 0 2px rgba(106,75,216,.35) inset}
  .chip .pill{display:inline-block; padding:.35rem .55rem; border:1px solid var(--chip-bd); border-radius:999px; color:var(--chip-t); font-size:12px; white-space:nowrap}
  .chip .pill strong{color:#fff}
  .board{margin-top:16px; background:var(--panel); border:1px solid var(--border); border-radius:14px; overflow:hidden}
  table{width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed}
  thead th{
    position:sticky; top:0; background:var(--head); color:#dfe3f3;
    border-bottom:1px solid var(--head-bd); font-size:12px; letter-spacing:.3px;
    padding:10px 6px; text-align:center; z-index:2; white-space:nowrap;
  }
  thead th.grouped{border-right:1px solid var(--head-bd)}
  tbody td{
    padding:8px 6px; border-bottom:1px solid rgba(255,255,255,.06);
    text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  tbody tr:nth-child(odd){background:var(--row)}
  tbody tr:nth-child(even){background:var(--row-alt)}
  tbody tr:hover td{background:var(--row-hl)}
  tbody td.hover, thead th.hover{background:var(--row-hl) !important}
  .col-player{width:220px; text-align:left}
  .col-player a{color:#cfe1ff; text-decoration:none; border-bottom:1px dotted transparent}
  .col-player a:hover{color:#fff; border-color:#cfe1ff}
  .col-year{width:64px}
  .col-season{width:86px}
  .col-program{width:110px}
  .col-team{width:136px; text-align:left}
  .col-num{width:54px}
  .col-rate{width:56px}
  tfoot td{
    font-weight:600; background:rgba(255,255,255,.05);
    border-top:1px solid rgba(255,255,255,.10); padding:8px 6px; text-align:center;
  }
  tfoot td.left{text-align:left}
  .num{font-variant-numeric: tabular-nums}
  @media (max-width:1200px){
    .wrap{max-width: 1000px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>North Texas Amateur Baseball League | Interactive Hitting Stats</h1>

    <div class="filters" id="filters">
      <div class="chip">
        <label for="fYear">Year</label>
        <select id="fYear"><option value="">All Years</option></select>
      </div>
      <div class="chip">
        <label for="fSeason">Season</label>
        <select id="fSeason"><option value="">All Seasons</option></select>
      </div>
      <div class="chip">
        <label for="fProgram">Program</label>
        <select id="fProgram"><option value="">All Programs</option></select>
      </div>
      <div class="chip">
        <label for="fTeam">Team</label>
        <select id="fTeam"><option value="">All Teams</option></select>
      </div>
      <div class="chip">
        <label for="fPlayer">Player</label>
        <select id="fPlayer"><option value="">All Players</option></select>
      </div>
      <div class="chip">
        <div style="display:flex;gap:8px;width:100%;align-items:center">
          <span id="playerPill" class="pill" style="display:none">Player: <strong></strong></span>
          <button id="clearPlayer" type="button" style="display:none">Clear Player</button>
          <button id="resetAll" type="button" style="margin-left:auto">Reset Filters</button>
        </div>
      </div>
    </div>

    <div class="board">
      <table id="stats">
        <thead>
          <tr>
            <th class="col-player">Player</th>
            <th class="col-year">Year</th>
            <th class="col-season">Season</th>
            <th class="col-program">Program</th>
            <th class="col-team">Team</th>

            <th class="col-num grouped" data-key="GP">GP</th>
            <th class="col-num" data-key="PA">PA</th>
            <th class="col-num" data-key="AB">AB</th>

            <th class="col-num grouped" data-key="R">R</th>
            <th class="col-num" data-key="H">H</th>
            <th class="col-num" data-key="1B">1B</th>
            <th class="col-num" data-key="2B">2B</th>
            <th class="col-num" data-key="3B">3B</th>
            <th class="col-num" data-key="HR">HR</th>

            <th class="col-num grouped" data-key="RBI">RBI</th>
            <th class="col-num" data-key="BB">BB</th>
            <th class="col-num" data-key="HBP">HBP</th>
            <th class="col-num" data-key="SO">SO</th>
            <th class="col-num" data-key="SB">SB</th>
            <th class="col-num" data-key="K-L">K-L</th>

            <th class="col-rate grouped" data-key="AVG">AVG</th>
            <th class="col-rate" data-key="OBP">OBP</th>
            <th class="col-rate" data-key="SLG">SLG</th>
            <th class="col-rate" data-key="OPS">OPS</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot></tfoot>
      </table>
    </div>
  </div>

<script>
const by = (sel, el=document) => el.querySelector(sel);
const all = (sel, el=document) => [...el.querySelectorAll(sel)];

const RATE_COLS = ["AVG","OBP","SLG","OPS"];
const INT_COLS  = ["GP","PA","AB","R","H","1B","2B","3B","HR","RBI","BB","HBP","SO","SB","K-L"];
const text = v => (v ?? "").toString();

const formatRate = v => {
  if (v === "" || v === null || v === undefined) return "–";
  let n = Number(v);
  if (Number.isNaN(n)) return "–";
  if (String(v).trim() === "0") return ".000";
  if (n < 1 && n >= 0) return (Math.round(n*1000)/1000).toFixed(3).replace(/^0/,'');
  if (n > 1 && n <= 2) return (Math.round(n*1000)/1000).toFixed(3).replace(/^0/,'');
  if (n > 2) return ((n/1000).toFixed(3)).replace(/^0/,'');
  return "–";
};
const formatInt = v => { let n = parseInt(v,10); return Number.isFinite(n) ? String(n) : "0"; };

async function loadCSV(path){
  const res = await fetch(path, {cache:"no-store"});
  if(!res.ok) throw new Error("CSV fetch error");
  const raw = await res.text();

  const rows = [];
  let i = 0, cur = "", inQ = false, row = [];
  while(i < raw.length){
    const c = raw[i];
    if (c === '"' ){
      if (inQ && raw[i+1] === '"'){ cur += '"'; i++; }
      else inQ = !inQ;
    } else if (c === ',' && !inQ){ row.push(cur); cur = ""; }
      else if ((c === '\n' || c === '\r') && !inQ){
        if (cur.length || row.length){ row.push(cur); rows.push(row); row = []; cur=""; }
      } else { cur += c; }
    i++;
  }
  if (cur.length || row.length) { row.push(cur); rows.push(row); }

  const headers = rows.shift().map(h => h.trim());
  return rows.map(r => {
    const rec = {};
    headers.forEach((h,j)=> rec[h] = (r[j] ?? "").trim());
    return rec;
  });
}

let DATA = [];
let filtered = [];
let sortKey = "PLAYER", sortDir = "asc";

function uniqueSorted(list, key){
  return [...new Set(list.map(r => r[key]).filter(v => v!=="" ))].sort((a,b)=> (a>b?1:-1));
}
function populateFilters(list){
  const years = uniqueSorted(list,"YEAR").reverse();
  const seasons = uniqueSorted(list,"SEASON");
  const programs = uniqueSorted(list,"PROGRAM");
  const teams = uniqueSorted(list,"TEAM");
  const players = uniqueSorted(list,"PLAYER");
  const opt = (v,l=v)=> `<option value="${v}">${l}</option>`;
  by("#fYear").innerHTML    = `<option value="">All Years</option>${years.map(opt).join("")}`;
  by("#fSeason").innerHTML  = `<option value="">All Seasons</option>${seasons.map(opt).join("")}`;
  by("#fProgram").innerHTML = `<option value="">All Programs</option>${programs.map(opt).join("")}`;
  by("#fTeam").innerHTML    = `<option value="">All Teams</option>${teams.map(opt).join("")}`;
  by("#fPlayer").innerHTML  = `<option value="">All Players</option>${players.map(opt).join("")}`;
}
function applyFilters(){
  const fy = by("#fYear").value;
  const fs = by("#fSeason").value;
  const fp = by("#fProgram").value;
  const ft = by("#fTeam").value;
  const pl = by("#fPlayer").value;

  filtered = DATA.filter(r =>
    (!fy || r.YEAR===fy) &&
    (!fs || r.SEASON===fs) &&
    (!fp || r.PROGRAM===fp) &&
    (!ft || r.TEAM===ft) &&
    (!pl || r.PLAYER===pl)
  );

  renderTable();
  const pill = by("#playerPill"), clr = by("#clearPlayer");
  if (pl){
    pill.style.display="inline-block";
    pill.querySelector("strong").textContent = pl;
    clr.style.display="inline-block";
  } else { pill.style.display="none"; clr.style.display="none"; }
}
function computeTotals(rows){
  const totals = {};
  ["GP","PA","AB","R","H","1B","2B","3B","HR","RBI","BB","HBP","SO","SB","K-L"].forEach(k => totals[k] =
    rows.reduce((s,r)=> s + (parseInt(r[k],10) || 0), 0)
  );
  totals.AVG = rows.length ? formatRate(rows.reduce((s,r)=> s + (parseFloat(r.AVG)||0),0) / rows.length) : "–";
  totals.OBP = rows.length ? formatRate(rows.reduce((s,r)=> s + (parseFloat(r.OBP)||0),0) / rows.length) : "–";
  totals.SLG = rows.length ? formatRate(rows.reduce((s,r)=> s + (parseFloat(r.SLG)||0),0) / rows.length) : "–";
  totals.OPS = rows.length ? formatRate(rows.reduce((s,r)=> s + (parseFloat(r.OPS)||0),0) / rows.length) : "–";
  return totals;
}
function sortRows(rows){
  const k = sortKey, dir = sortDir === "asc" ? 1 : -1;
  return rows.slice().sort((a,b)=>{
    if (["GP","PA","AB","R","H","1B","2B","3B","HR","RBI","BB","HBP","SO","SB","K-L"].includes(k)){
      return ( (parseInt(a[k],10)||0) - (parseInt(b[k],10)||0) ) * dir;
    } else if (["AVG","OBP","SLG","OPS"].includes(k)){
      const av = parseFloat(a[k])||0, bv = parseFloat(b[k])||0;
      return (av - bv) * dir;
    } else {
      return (a[k] > b[k] ? 1 : -1) * dir;
    }
  });
}
function renderTable(){
  const tbody = by("#stats tbody");
  const tfoot = by("#stats tfoot");
  const rows = sortRows(filtered);

  tbody.innerHTML = rows.map(r=>{
    const rate = k => `<td class="num">${formatRate(r[k])}</td>`;
    const num  = k => `<td class="num">${formatInt(r[k])}</td>`;
    return `<tr>
      <td class="col-player"><a href="#" data-player="${text(r.PLAYER)}">${text(r.PLAYER)}</a></td>
      <td class="col-year">${text(r.YEAR)}</td>
      <td class="col-season">${text(r.SEASON)}</td>
      <td class="col-program">${text(r.PROGRAM)}</td>
      <td class="col-team">${text(r.TEAM)}</td>
      ${num("GP")}${num("PA")}${num("AB")}
      ${num("R")}${num("H")}${num("1B")}${num("2B")}${num("3B")}${num("HR")}
      ${num("RBI")}${num("BB")}${num("HBP")}${num("SO")}${num("SB")}${num("K-L")}
      ${rate("AVG")}${rate("OBP")}${rate("SLG")}${rate("OPS")}
    </tr>`;
  }).join("");

  const t = computeTotals(rows);
  tfoot.innerHTML = `<tr>
    <td class="left col-player"><strong>Totals</strong></td>
    <td class="col-year"></td>
    <td class="col-season"></td>
    <td class="col-program"></td>
    <td class="col-team"></td>
    <td class="num">${t.GP}</td><td class="num">${t.PA}</td><td class="num">${t.AB}</td>
    <td class="num">${t.R}</td><td class="num">${t.H}</td><td class="num">${t["1B"]}</td><td class="num">${t["2B"]}</td><td class="num">${t["3B"]}</td><td class="num">${t.HR}</td>
    <td class="num">${t.RBI}</td><td class="num">${t.BB}</td><td class="num">${t.HBP}</td><td class="num">${t.SO}</td><td class="num">${t.SB}</td><td class="num">${t["K-L"]}</td>
    <td class="num">${t.AVG}</td><td class="num">${t.OBP}</td><td class="num">${t.SLG}</td><td class="num">${t.OPS}</td>
  </tr>`;

  all('a[data-player]', tbody).forEach(a=>{
    a.addEventListener('click', e=>{
      e.preventDefault();
      by('#fPlayer').value = a.dataset.player;
      applyFilters();
    });
  });

  wireColumnHover();
}
function wireColumnHover(){
  const table = by('#stats');
  const cols = all('thead th', table);
  const bodyCells = all('tbody td', table);
  const clear = ()=>{ cols.forEach(c=>c.classList.remove('hover')); bodyCells.forEach(c=>c.classList.remove('hover')); };
  all('tbody tr', table).forEach(tr=>{
    const tds = all('td', tr);
    tds.forEach((td, idx)=>{
      td.addEventListener('mouseenter', ()=>{
        clear();
        cols[idx].classList.add('hover');
        all(`tbody tr td:nth-child(${idx+1})`, table).forEach(c=>c.classList.add('hover'));
      });
    });
  });
  table.addEventListener('mouseleave', clear);
}
all('thead th[data-key]').forEach(th=>{
  th.style.cursor = 'pointer';
  th.title = 'Click to sort';
  th.addEventListener('click', ()=>{
    const k = th.dataset.key;
    if (sortKey === k) sortDir = (sortDir === 'asc' ? 'desc' : 'asc');
    else { sortKey = k; sortDir = 'desc'; }
    renderTable();
  });
});
['#fYear','#fSeason','#fProgram','#fTeam','#fPlayer'].forEach(sel=>{
  by(sel).addEventListener('change', applyFilters);
});
by('#resetAll').addEventListener('click', ()=>{
  ['#fYear','#fSeason','#fProgram','#fTeam','#fPlayer'].forEach(sel=> by(sel).value = "");
  applyFilters();
});
by('#clearPlayer').addEventListener('click', ()=>{
  by('#fPlayer').value = "";
  applyFilters();
});

(async function init(){
  try{
    DATA = await loadCSV('ntabl-hitting-stats.csv');
    DATA = DATA.map(r=>({
      PLAYER : r.PLAYER || r.Player || r.name || "",
      YEAR   : r.YEAR || r.Year || "",
      SEASON : r.SEASON || r.Season || "",
      PROGRAM: r.PROGRAM || r.Program || r.DIVISION || "",
      TEAM   : r.TEAM || r.Team || "",
      GP: r.GP || r.G || "0",
      PA: r.PA || "0",
      AB: r.AB || "0",
      R:  r.R  || "0",
      H:  r.H  || "0",
      "1B": r["1B"] || r["1B "] || "0",
      "2B": r["2B"] || "0",
      "3B": r["3B"] || "0",
      HR: r.HR || "0",
      RBI: r.RBI || "0",
      BB:  r.BB  || "0",
      HBP: r.HBP || "0",
      SO:  r.SO  || "0",
      SB:  r.SB  || "0",
      "K-L": r["K-L"] || r["K_L"] || "0",
      AVG: r.AVG ?? "",
      OBP: r.OBP ?? "",
      SLG: r.SLG ?? "",
      OPS: r.OPS ?? ""
    }));
    populateFilters(DATA);
    applyFilters();
  }catch(e){
    by('#stats tbody').innerHTML = `<tr><td colspan="24" style="text-align:center;padding:18px">Error loading data.</td></tr>`;
    console.error(e);
  }
})();
</script>
</body>
</html>